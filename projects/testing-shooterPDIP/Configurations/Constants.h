#pragma once
#include "../../../KRAI_Library/Pinout/F407VET6_2023.h"

// PIN SERIAL
#define SERIAL_RX PA_10
#define SERIAL_TX PA_9
#define PS3_RX F407VET6_UART_RX_2
#define PS3_TX F407VET6_UART_TX_2

// PIN MOTOR
#define PWM_FLY F407VET6_PWM_MOTOR_5
#define FWD_FLY F407VET6_FOR_MOTOR_5
#define REV_FLY F407VET6_REV_MOTOR_5
#define PPR_FLY 103.3

#define PWM_ANG F407VET6_PWM_MOTOR_7
#define FWD_ANG F407VET6_FOR_MOTOR_7
#define REV_ANG F407VET6_REV_MOTOR_7
#define PPR_ANG 538

#define PWM_RLD F407VET6_PWM_MOTOR_8
#define FWD_RLD F407VET6_FOR_MOTOR_8
#define REV_RLD F407VET6_REV_MOTOR_8
#define PPR_RLD 104.4

// PIN ENCODER
#define CHA_FLY F407VET6_ENCODER_2_4_A
#define CHB_FLY F407VET6_ENCODER_2_4_B

#define CHA_RLD F407VET6_ENCODER_2_2_A
#define CHB_RLD F407VET6_ENCODER_2_2_B

#define CHA_ANG F407VET6_ENCODER_2_3_A
#define CHB_ANG F407VET6_ENCODER_2_3_B 

// PIN INTTERUPT
#define LIMIT_SWITCH_PIN F407VET6_ENCODER_2_1_B

// PID
#define MAXOUT 1
#define VFF 0
#define RPF 1000
#define MAXIN 1000

#define TS 10 // ms

// PID TUNING
#define KP_FLY 0.001f
#define KI_FLY 0.04f
#define KD_FLY 0.00008f

#define KP_ANG 0
#define KI_ANG 0
#define KD_ANG 0

#define SPEED_RLD 0.7 //PWM for Reloader